# 네트워크

## 네트워크 기초
 - 네트워크 환경에서 주고받는 정보는 Bit로 표현한다.
 - 데이터를 주고 받기 위해서는 기기와 프로토콜이 필요하다  
   프로토콜은 '약속', '규칙'을 의미한다.

- 데이터 통신에는 회선 교환 / 패킷 교환이 있다.

##### 회선 교환
  - 회선 교환은 회선을 독점. 

##### 패킷 교환 
 - 패킷 교환은 데이터를 패킷 단위로 보내기 때문에, 회선을 독점하지 않음. 
  - 컴퓨터 네트워크는 패킷 네트워크이다.
  - 패킷 네트워크는 컴퓨터, 통신 매체, 인터페이스, 라우터로 이루어져 있다.
  - Multi-Access / P2P(point to point)를 조합해서 네트워크 전체가 구성된다.

### OSI 7 Layers 소개 

  > 7계층: 응용 (Application)  
  >
  > 6계층: 표현 (Presentation)   
  >
  > 5계층: 세션 (Session)  
  >
  > 4계층: 전송 (Transportation)  
  >
  > 3계층: 네트워크 (Network)  
  >
  > 2계층: 데이터링크 (Datalinking)  
  >
  > 1계층: 물리 (Physical)  
  

- 각 계층은 독립적이며 각각의 Protocol과 역할이 있다. 마치 우체배달부가 내가 어떤 편지지에 어떤 내용을 썼는지 상관 안하듯이. 

- 상위계층은 하위 계층에 대해 관여하지 않고, 하위계층은 상위 계층에 호출당할 뿐.

#### 캡슐화 

  - 마치 소포를 보내고 받을 때를 생각해 보면 된다.  
  
  - 각 계층에서 보낼 때 Header/Trailer를 더해나가서,  
  최종적으로는 Frame이라는 형태로 송신하고, 그 Frame  
  을 벗겨내서 안의 데이터를 가져간다.

  |계층 | 호칭 | 내용|
  |----|:---:|:-----:|
  |사용자|데이터|송수신하고 싶은 데이터|
  |5~7계층 PDU | 메시지 | 데이터를 통신용으로 변환 + 7계층 헤더|
  |4계층 PDU | 세그먼트, 패킷 | 메시지와 4계층 헤더|
  |3계층 PDU | 데이터그램 | 세그먼트, 패킷과 3계층 헤더|
  |2계층 PDU | 프레임 | 데이터그램과 2계층 헤더|
  |1계층 | 물리 신호 | 프레임을 전송매체로 운반하기 위한 물리 신호로 변환|

#### 프로토콜
  - 프로토콜이 정하는 것
    - 데이터의 내용
    - 헤더의 내용
    - 데이터를 주고받는 순서
  - 계층마다 존재하는 프로토콜 그룹을 Protocol Suite라고 부름.
  - De Facto Standard로 TCP/IP 네트워크 프로토콜이 사용된다. 


### TCP/IP Protocol

  - IETF (The Internet Engineering Task Force)에서 제정.
  - RFC (Request for Comment)가 규격이 됨.
  - TCP/IP의 계층은 총 4가지이다. 
  > 4계층: Application  
  > 3계층: Transport  
  > 2계층: Internet  
  > 1계층: Interface  

  - 계층은 나누어져 있지만, OSI모델의 계층과는 별 관계성이 존재하지 않는다. 

  - 인터넷에서 자주 사용되는 Protocol

| #     | 계층 | 예제 |
|-------|------|-----|  
| 4계층 | Application | HTTP, FTP, SMTP 등등|
| 3계층 | Transport | TCP / UDP |
| 2계층 | Internet | IP / ARP |
| 1계층 | Interface | Ethernet, Frame-Relay, PPP |


# 신호의 전송과 충돌

## 1계층의 역할과 개요

- 1계층의 역할은 케이블이 연결되어 있는 기기에 신호를 전달하는 것이다.  
  2계층부터 7계층 까지는데이터를 전송하기 전에 어떻게 데이터를 가공할 것인가, 받고 나서 어떻게 풀 것인가에 대해 관리하는 곳.

- 유선 네트워크에서 보내는 매체는 크게 2가지 종류가 있다:
  1. 동선 케이블 (주로 UTP → Unshielded Twist Pair Cable)
  2. 광 파이버 케이블

- 컴퓨터에서 생성된 데이터를 케이블에 맞는 신호로 변환하기 위한  
인터페이스로 NIC (Network Interface Card)가 일반적으로 쓰인다.

- WAN의 경우에는 PC에 NIC를 부착하지 않고 DCE (Data Circuit terminating Equipment)라는 별도의 신호 변환기를 사용한다.

### 신호와 충돌
- 위에서 말했듯이 컴퓨터에서 생성된 데이터를 물리 계층에서 신호로 바꾸기 위해서 인터페이스가 사용된다고 했다. 

- 즉 인터페이스는 비트를 신호로, 신호를 비트로 변환하는 기기이다.

- 신호에 발생하는 문제는 3가지가 존재한다:
1. __신호의 감쇠__ : 긴 케이블을 지나가면서 신호가 약해진다.   
이럴땐 증폭기 (Repeater)를 사용하여 대응한다.
2. __노이즈, 간섭__ : 외부적 요인에 의해 신호의 형태가 무너져버린다.  
케이블에 특수 가공을 하여 막을 수 있다. 

3. __충돌__ : 신호가 보내지고 있는 도중에 다른 신호를 보내서 신호가 충돌해버리는 경우.  
신호의 타이밍을 엇갈리게 해서 보내는 방법과 신호가 지나가는 루트를 나누어버리는 방법 2가지가 있다.


신호의 감쇠를 막기위해서 리피터 혹은 허브를 많이 쓰는데, 문제는 멀티 액세스 네트워크를 구축할 때, 허브는 수신한 포트 이외에도 모든 포트에 수신한 신호를 송신한다는 점이다. 이를 Flooding이라고 한다.

이 Flooding으로 인해 신호들이 충돌하게 되며, 충돌이 발생할지 모르는 범위를 Collision domain이라고 한다. 


## 2계층의 역할과 개요

아무 기준 없이 데이터를 보내고 받게 되면 필연적으로 신호간의 충돌이 발생하게 된다. 이를 막기 위해 송신하는 타이밍을 엇갈리게 하는 방법이 있다. 즉, __신호의 송신 전이나 수신 후에 바르게데이터를 송수신하는 순서__가 중요하다.

__2계층에서는 신호가 닿는 범위에서의 데이터 전송에 관한 규정을 정리하고 있다.__ 특히 Segment범위 내에서의 데이터 전송을 의미한다.


### 프레이밍 (Framing)

  2계층에서의 데이터 전송에 관한 규정은 1계층에서 어떤 인터페이스를 통해 데이터를 송수신하는 가에 따라서도 변하게 된다.   
  
  특히 2계층에서는 LAN용 규정과 WAN용 규정이 있는데, 이 중 LAN용 규정은 그 유명한 Ethernet이다. 

  Ethernet내에서 시행 되는 규정 중에 Framing이라는 것이 있는데, 
  이는 __1계층에 주고받는 신호를 비트화해서 그 비트에 의미를 부여하는 것이다__.
  
  - Preamble :송수신 시작하는 데이터에서 "지금부터 프레임이 시작된다"라는 신호를 보낸다. 비동기 통신에서는 이 Preamble를 수신하고 나서부터 데이터 신호를 받는 것으로 인식한다. 
  어렵지만, 프리앰블로 송신측과 수신측의 비트 타이밍을 맞춘다는 것만 알면 OK.
